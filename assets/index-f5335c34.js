import{al as Pe,l as H,m as le,am as fe,d as D,i as W,an as ne,a as G,h as g,s as I,F as oe,a3 as ve,o as O,b as z,n as be,e as x,f as Te,_ as pe,O as Q,ao as we,ap as ke,c as M,j as me,aq as Ee,A as n,H as K,a6 as Se,a9 as Be,ar as Oe,E as q,as as ze,p as Ie,at as Le,r as ie,au as _e,ac as re,a4 as Re,a1 as Ae,u as Fe,av as ue,aa as Ve,ab as Ue,a5 as De,a7 as Me,N as je,w as Ke,g as qe,W as He,Q as T,T as We,$ as Ge,y as Qe,z as A,aw as Xe,ax as Ye,ay as Ze,Z as R}from"./index-e9429a11.js";import{E as Je}from"./el-image-viewer-f967b072.js";import{u as et,a as te}from"./index-33dbb1c3.js";import{E as tt}from"./el-card-b79f9483.js";const F=e=>Pe(e),X=Symbol("tabsRootContextKey"),at=H({tabs:{type:le(Array),default:()=>fe([])}}),he="ElTabBar",st=D({name:he}),lt=D({...st,props:at,setup(e,{expose:a}){const m=e,E=Q(),r=W(X);r||ne(he,"<el-tabs><el-tab-bar /></el-tabs>");const o=G("tabs"),f=g(),N=g(),u=()=>{let v=0,p=0;const t=["top","bottom"].includes(r.props.tabPosition)?"width":"height",i=t==="width"?"x":"y",L=i==="x"?"left":"top";return m.tabs.every(S=>{var k,s;const h=(s=(k=E.parent)==null?void 0:k.refs)==null?void 0:s[`tab-${S.uid}`];if(!h)return!1;if(!S.active)return!0;v=h[`offset${F(L)}`],p=h[`client${F(t)}`];const $=window.getComputedStyle(h);return t==="width"&&(m.tabs.length>1&&(p-=Number.parseFloat($.paddingLeft)+Number.parseFloat($.paddingRight)),v+=Number.parseFloat($.paddingLeft)),!1}),{[t]:`${p}px`,transform:`translate${F(i)}(${v}px)`}},b=()=>N.value=u();return I(()=>m.tabs,async()=>{await oe(),b()},{immediate:!0}),ve(f,()=>b()),a({ref:f,update:b}),(v,p)=>(O(),z("div",{ref_key:"barRef",ref:f,class:be([x(o).e("active-bar"),x(o).is(x(r).props.tabPosition)]),style:Te(N.value)},null,6))}});var nt=pe(lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const ot=H({panes:{type:le(Array),default:()=>fe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),it={tabClick:(e,a,m)=>m instanceof Event,tabRemove:(e,a)=>a instanceof Event},de="ElTabNav",ct=D({name:de,props:ot,emits:it,setup(e,{expose:a,emit:m}){const E=Q(),r=W(X);r||ne(de,"<el-tabs><tab-nav /></el-tabs>");const o=G("tabs"),f=we(),N=ke(),u=g(),b=g(),v=g(),p=g(),t=g(!1),i=g(0),L=g(!1),S=g(!0),k=M(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),s=M(()=>({transform:`translate${k.value==="width"?"X":"Y"}(-${i.value}px)`})),h=()=>{if(!u.value)return;const c=u.value[`offset${F(k.value)}`],d=i.value;if(!d)return;const l=d>c?d-c:0;i.value=l},$=()=>{if(!u.value||!b.value)return;const c=b.value[`offset${F(k.value)}`],d=u.value[`offset${F(k.value)}`],l=i.value;if(c-l<=d)return;const C=c-l>d*2?l+d:c-d;i.value=C},V=async()=>{const c=b.value;if(!t.value||!v.value||!u.value||!c)return;await oe();const d=v.value.querySelector(".is-active");if(!d)return;const l=u.value,C=["top","bottom"].includes(r.props.tabPosition),P=d.getBoundingClientRect(),y=l.getBoundingClientRect(),B=C?c.offsetWidth-y.width:c.offsetHeight-y.height,w=i.value;let _=w;C?(P.left<y.left&&(_=w-(y.left-P.left)),P.right>y.right&&(_=w+P.right-y.right)):(P.top<y.top&&(_=w-(y.top-P.top)),P.bottom>y.bottom&&(_=w+(P.bottom-y.bottom))),_=Math.max(_,0),i.value=Math.min(_,B)},j=()=>{var c;if(!b.value||!u.value)return;e.stretch&&((c=p.value)==null||c.update());const d=b.value[`offset${F(k.value)}`],l=u.value[`offset${F(k.value)}`],C=i.value;l<d?(t.value=t.value||{},t.value.prev=C,t.value.next=C+l<d,d-C<l&&(i.value=d-l)):(t.value=!1,C>0&&(i.value=0))},xe=c=>{const d=c.code,{up:l,down:C,left:P,right:y}=q;if(![l,C,P,y].includes(d))return;const B=Array.from(c.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),w=B.indexOf(c.target);let _;d===P||d===l?w===0?_=B.length-1:_=w-1:w<B.length-1?_=w+1:_=0,B[_].focus({preventScroll:!0}),B[_].click(),ce()},ce=()=>{S.value&&(L.value=!0)},Y=()=>L.value=!1;return I(f,c=>{c==="hidden"?S.value=!1:c==="visible"&&setTimeout(()=>S.value=!0,50)}),I(N,c=>{c?setTimeout(()=>S.value=!0,50):S.value=!1}),ve(v,j),me(()=>setTimeout(()=>V(),0)),Ee(()=>j()),a({scrollToActiveTab:V,removeFocus:Y}),I(()=>e.panes,()=>E.update(),{flush:"post",deep:!0}),()=>{const c=t.value?[n("span",{class:[o.e("nav-prev"),o.is("disabled",!t.value.prev)],onClick:h},[n(K,null,{default:()=>[n(Se,null,null)]})]),n("span",{class:[o.e("nav-next"),o.is("disabled",!t.value.next)],onClick:$},[n(K,null,{default:()=>[n(Be,null,null)]})])]:null,d=e.panes.map((l,C)=>{var P,y,B,w;const _=l.uid,Z=l.props.disabled,J=(y=(P=l.props.name)!=null?P:l.index)!=null?y:`${C}`,ee=!Z&&(l.isClosable||e.editable);l.index=`${C}`;const Ne=ee?n(K,{class:"is-icon-close",onClick:U=>m("tabRemove",l,U)},{default:()=>[n(Oe,null,null)]}):null,$e=((w=(B=l.slots).label)==null?void 0:w.call(B))||l.props.label,Ce=!Z&&l.active?0:-1;return n("div",{ref:`tab-${_}`,class:[o.e("item"),o.is(r.props.tabPosition),o.is("active",l.active),o.is("disabled",Z),o.is("closable",ee),o.is("focus",L.value)],id:`tab-${J}`,key:`tab-${_}`,"aria-controls":`pane-${J}`,role:"tab","aria-selected":l.active,tabindex:Ce,onFocus:()=>ce(),onBlur:()=>Y(),onClick:U=>{Y(),m("tabClick",l,J,U)},onKeydown:U=>{ee&&(U.code===q.delete||U.code===q.backspace)&&m("tabRemove",l,U)}},[$e,Ne])});return n("div",{ref:v,class:[o.e("nav-wrap"),o.is("scrollable",!!t.value),o.is(r.props.tabPosition)]},[c,n("div",{class:o.e("nav-scroll"),ref:u},[n("div",{class:[o.e("nav"),o.is(r.props.tabPosition),o.is("stretch",e.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:b,style:s.value,role:"tablist",onKeydown:xe},[e.type?null:n(nt,{ref:p,tabs:[...e.panes]},null),d])])])}}}),rt=H({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:le(Function),default:()=>!0},stretch:Boolean}),ae=e=>Re(e)||Ae(e),ut={[_e]:e=>ae(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ae(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ae(e),tabAdd:()=>!0};var dt=D({name:"ElTabs",props:rt,emits:ut,setup(e,{emit:a,slots:m,expose:E}){var r,o;const f=G("tabs"),{children:N,addChild:u,removeChild:b}=et(Q(),"ElTabPane"),v=g(),p=g((o=(r=e.modelValue)!=null?r:e.activeName)!=null?o:"0"),t=s=>{p.value=s,a(_e,s),a("tabChange",s)},i=async s=>{var h,$,V;if(!(p.value===s||re(s)))try{await((h=e.beforeLeave)==null?void 0:h.call(e,s,p.value))!==!1&&(t(s),(V=($=v.value)==null?void 0:$.removeFocus)==null||V.call($))}catch{}},L=(s,h,$)=>{s.props.disabled||(i(h),a("tabClick",s,$))},S=(s,h)=>{s.props.disabled||re(s.props.name)||(h.stopPropagation(),a("edit",s.props.name,"remove"),a("tabRemove",s.props.name))},k=()=>{a("edit",void 0,"add"),a("tabAdd")};return ze({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},M(()=>!!e.activeName)),I(()=>e.activeName,s=>i(s)),I(()=>e.modelValue,s=>i(s)),I(p,async()=>{var s;await oe(),(s=v.value)==null||s.scrollToActiveTab()}),Ie(X,{props:e,currentName:p,registerPane:u,unregisterPane:b}),E({currentName:p}),()=>{const s=e.editable||e.addable?n("span",{class:f.e("new-tab"),tabindex:"0",onClick:k,onKeydown:V=>{V.code===q.enter&&k()}},[n(K,{class:f.is("icon-plus")},{default:()=>[n(Le,null,null)]})]):null,h=n("div",{class:[f.e("header"),f.is(e.tabPosition)]},[s,n(ct,{ref:v,currentName:p.value,editable:e.editable,type:e.type,panes:N.value,stretch:e.stretch,onTabClick:L,onTabRemove:S},null)]),$=n("div",{class:f.e("content")},[ie(m,"default")]);return n("div",{class:[f.b(),f.m(e.tabPosition),{[f.m("card")]:e.type==="card",[f.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[h,$]:[$,h]])}}});const ft=H({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),vt=["id","aria-hidden","aria-labelledby"],ye="ElTabPane",bt=D({name:ye}),pt=D({...bt,props:ft,setup(e){const a=e,m=Q(),E=Fe(),r=W(X);r||ne(ye,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=G("tab-pane"),f=g(),N=M(()=>a.closable||r.props.closable),u=ue(()=>{var i;return r.currentName.value===((i=a.name)!=null?i:f.value)}),b=g(u.value),v=M(()=>{var i;return(i=a.name)!=null?i:f.value}),p=ue(()=>!a.lazy||b.value||u.value);I(u,i=>{i&&(b.value=!0)});const t=Ve({uid:m.uid,slots:E,props:a,paneName:v,active:u,index:f,isClosable:N});return me(()=>{r.registerPane(t)}),Ue(()=>{r.unregisterPane(t.uid)}),(i,L)=>x(p)?De((O(),z("div",{key:0,id:`pane-${x(v)}`,class:be(x(o).b()),role:"tabpanel","aria-hidden":!x(u),"aria-labelledby":`tab-${x(v)}`},[ie(i.$slots,"default")],10,vt)),[[Me,x(u)]]):je("v-if",!0)}});var ge=pe(pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const mt=Ke(dt,{TabPane:ge}),_t=qe(ge);const ht={class:"list flex j-b"},yt={__name:"card-list",props:{list:{type:Array,default:()=>[]}},setup(e){return(a,m)=>{const E=tt;return O(),z("div",null,[T("div",ht,[(O(!0),z(We,null,Ge(e.list,(r,o)=>(O(),Qe(E,{class:"box-card",key:o},{default:A(()=>[ie(a.$slots,"cont",{row:r},void 0,!0)]),_:2},1024))),128))])])}}},se=He(yt,[["__scopeId","data-v-d5c343bd"]]),gt=["onClick"],xt={style:{width:"100px"},class:"flex a-c"},Nt={class:"flex f-c j-b",style:{"padding-left":"10px"}},$t={class:"text-1 font-100",style:{"padding-top":"4px"}},Ct={class:"font-100",style:{"padding-bottom":"4px"}},Pt={class:"flex a-c"},Tt={style:{width:"50px"},class:"flex a-c"},wt={key:0,class:"flex f-c j-a",style:{"padding-left":"10px"}},kt={class:"font-100 text-1"},Et={key:1,class:"flex a-c",style:{"padding-left":"10px"}},St={class:"flex a-c"},Bt={style:{width:"50px"},class:"flex a-c"},Ot={key:0,class:"flex f-c j-a",style:{"padding-left":"10px"}},zt={class:"font-100 text-1"},It={key:1,class:"flex a-c",style:{"padding-left":"10px"}},Vt={__name:"index",setup(e){let a=W("$vm");const m=g("sheet");let{list:E}=te(Xe,{limit:100,uid:a.useLoginInfoPinia.userInfo.userId},"playlist"),{list:r}=te(Ye,{limit:100,uid:a.useLoginInfoPinia.userInfo.userId},"follow"),{list:o}=te(Ze,{limit:100,uid:a.useLoginInfoPinia.userInfo.userId},"followeds");const f=N=>{a.$router.push({path:"sheetDetails",query:{id:N.id,name:N.name}})};return I(()=>a.useLoginInfoPinia.isLoginState,N=>{N==!1&&(a.useLoginInfoPinia.isDialogState=!0)},{immediate:!0}),(N,u)=>{const b=Je,v=_t,p=mt;return O(),z("div",null,[n(p,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=t=>m.value=t)},{default:A(()=>[n(v,{label:"我的歌单",name:"sheet"},{default:A(()=>[n(x(se),{list:x(E)},{cont:A(({row:t})=>[T("div",{class:"flex",style:{cursor:"pointer"},onClick:i=>f(t)},[T("div",xt,[n(b,{style:{width:"100px",height:"100px","border-radius":"8px"},src:t.coverImgUrl},null,8,["src"])]),T("div",Nt,[T("div",$t,R(t.name),1),T("div",Ct,R(t.trackCount)+"首",1)])],8,gt)]),_:1},8,["list"])]),_:1}),n(v,{label:"我的关注",name:"follow"},{default:A(()=>[n(x(se),{list:x(r)},{cont:A(({row:t})=>[T("div",Pt,[T("div",Tt,[n(b,{style:{width:"50px",height:"50px","border-radius":"50%"},src:t.avatarUrl,"zoom-rate":1.2,"preview-src-list":[t.avatarUrl],"initial-index":0},null,8,["src","preview-src-list"])]),t.signature!==""?(O(),z("div",wt,[T("div",null,R(t.nickname),1),T("div",kt,R(t.signature),1)])):(O(),z("div",Et,R(t.nickname),1))])]),_:1},8,["list"])]),_:1}),n(v,{label:"我的粉丝",name:"fans"},{default:A(()=>[n(x(se),{list:x(o)},{cont:A(({row:t})=>[T("div",St,[T("div",Bt,[n(b,{style:{width:"50px",height:"50px","border-radius":"50%"},src:t.avatarUrl,"zoom-rate":1.2,"preview-src-list":[t.avatarUrl],"initial-index":0},null,8,["src","preview-src-list"])]),t.signature!==""?(O(),z("div",Ot,[T("div",null,R(t.nickname),1),T("div",zt,R(t.signature),1)])):(O(),z("div",It,R(t.nickname),1))])]),_:1},8,["list"])]),_:1})]),_:1},8,["modelValue"])])}}};export{Vt as default};
